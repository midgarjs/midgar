<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:${pluginName}:afterInitevent:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:initHttpServer Classes Classes Cli Logger Midgar Plugin PluginManager Events ${pluginName}:afterInit afterInit plugin event. @midgar/midgar:afterInit afterInit event. @midgar/midgar:afterLoadPlugins afterLoadPlugins event. @midgar/midgar:initHttpServer initHttpServer event. Used to attach middleware on express × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-30T14:22:24+00:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:${pluginName}:afterInitevent:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:initHttpServer En développement ne pas utiliser en production Midgar Qu'est ce que Midgar Midgar est un framework nodejs se basant sur un système de plugin. Il permet de réaliser rapidement des applications web complexes de manière claire et structuré. Installation $ npm install -g @midgar/midgar Utilisation Le moyen le plus rapide de démarrer avec Midgar est d'utiliser le CLI pour générer la structure d'un projet. $ midgar init ~/my-project/ $ cd ~/my-project/ $ npm i En soit Midgar ne fait que charger des plugins et exposer express. Sans plugin, il ne fait donc rien de concret ! L'étape suivante est donc d'installer des plugins. L'installation des plugins se fait via npm ou yarn. L'utilisation des scripts de npm permet l'activation automatique des plugins sur le projet. Vous pouvez voir la structure du project générer par la commande init ici. Plugins officiel Nom Description service Service avec injection de dépendances controller Controller pour la gestion des routes Cli Voici les commandes de base du cli init: $ midgar run init ./new-project Initialise un nouveau projet midgar. add: $ midgar add monplugin Ajoute un plugin au fichier plugins.json contenu dans le dossier de configuration du projet. rm: $ midgar rm monplugin Supprime un plugin du fichier plugins.json. enable: $ midgar enable monplugin Active un plugin présent dans le fichier plugins.json. Si le plugin n'est pas présen, il n'est pas ajouté et un avertisement est affiché. disable: $ midgar disable monplugin Désactive un plugin présent dans le fichier plugins.json. Si le plugin n'est pas présent, il n'est pas ajouté et un avertisement est affiché. Paramètre optionnel: $ midgar add monplugin --config ~/mon-projet/config Vous pouvez ajouter le chemin de la configuration du projet au cli. Par defaut, le cli cherche un fichier .midrc contenant le chemin de la configuration. S'il ne trouve pas ce fichier il cherche dans ./config. Vous pouvez voir un exemple de fichier .midrc ici Créer un plugin Fichier plugin Voici un exemple de fichier plugin: import { Plugin } from '@midgar/midgar' /** * TestPlugin */ class TestPlugin extends Plugin { init () { // Listen @midgar/midgar:afterInit event this.mid.on('@midgar/midgar:afterLoadPlugins', async () =&gt; { // Ceci est exécuté une fois que tous les plugins ont été chargés }) } } export default TestPlugin Vous pouvez retouver la liste des évènements dans la documentation. Package npm Un plugin est en premier lieu un package npm et doit etre forcement accompagné d'un fichier package.json. Le main du package.json doit pointer sur le fichier plugin. Pour fonctionner il doit aussi etre déclarré dans le fichier plugins.json contenu dans le dossier de configuration du projet. Les scripts postinstall et preuninstall peuvent être utiliser pour ajouter/supprimer automatiquement les plugins du fichier plugins.json. Configuration du plugin Vous pouvez ajouter un fichier plugin-config.js dans le même dossier que le fichier plugin. Ce fichier est charger avant le chargement des plugins et est injecté dans le membre .config de l'instance du plugin. Importer Le système de plugin comprend un importer de fichier. Vous pouvez déclarrer un nouveau dossier a importer dans la methode init de votre plugin: this.pm.addPluginDir('mon-dossier', 'mondossier') @see: https://midgarjs.github.io/midgar/PluginManager.html#addPluginDir__anchor Pour importer les fichiers contenu de ce dossier: const files = await this.mid.pm.importDir('mon-dossier') @see: https://midgarjs.github.io/midgar/PluginManager.html#importDir__anchor La méthode importDir importe tous les fichier du dossier mon-dossier pour tous les plugins. Le chemin du dossier mon-dossier est par défaut ./mondossier/ relativement par rapport au dossier du fichier plugin. Le chemin du dossier mon-dossier peut etre configurer pour chaque plugin dans le fichier plugin-config.js: export default { { dirs: { 'mon-dossier': 'monnouveaudossier', } } Réecriture Si un plugin ne fait pas axactement ce dont vous avez besoin ou si vous voulez enrichir les fonctionnalitées d'un plugin, vous pouvez utiliser le système de réecture. Le fichier plugin ainsi que les fichiers importer via le système de dossier sont réecrivable. Plugin Pour réecrire un fichier plugin, ajouter ceci dans le fichier plugin-config.js. export default { rewritePlugin: '@midgar/service', } } Lors du chargement des plugins, ce plugin sera chargé à la place du plugin @midgar/service. Le plugin devrait ressember à ceci: import ServicePlugin from '@midgar/service' class RewritePlugin extends ServicePlugin { async init () { await super.init() .... } } export default RewritePlugin Fichier Pour réecrir un fichier import via le système de dossier, ajouter ceci dans le fichier plugin-config.js. export default { rewriteFile: { \"midgar-mongoose-models\": { \"@midgar/graphql-auth\": { 'user.js': './rewrite/models/user.js' } } } } Lors de l'import des fichers, le fichier ./rewrite/models/user.js sera chargé à la place du fichier user.js contenu dans le dossier midgar-mongoose-models et pour le plugin @midgar/graphql-auth × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-30T14:22:24+00:00 using the DocStrap template. "},"Cli.html":{"id":"Cli.html","title":"Class: Cli","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:${pluginName}:afterInitevent:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:initHttpServer Class: Cli Cli Manage the Commander program new Cli() Construct init vars, create program and Midgar instance Methods addCommand(command) Add a command to the program Parameters: Name Type Description command Object Command Object addCommands(commands) Add commands to commander program Parameters: Name Type Description commands Array Array of comamnd Object &lt;async&gt; init() Get the config path, init midgard and load plugins commands &lt;async&gt; loadPluginsCommands() Get all plugins cli files and add commands run() Parse argv and run command Wait for action result promise Returns: Type Any × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-30T14:22:24+00:00 using the DocStrap template. "},"Logger.html":{"id":"Logger.html","title":"Class: Logger","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:${pluginName}:afterInitevent:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:initHttpServer Class: Logger Logger Logger class new Logger() Methods &lt;async&gt; error(msg) log an error message or an Error Parameters: Name Type Description msg * &lt;async&gt; init() Init logger &lt;async&gt; log(level, msg) log a message Parameters: Name Type Description level * msg * × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-30T14:22:24+00:00 using the DocStrap template. "},"Midgar.html":{"id":"Midgar.html","title":"Class: Midgar","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:${pluginName}:afterInitevent:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:initHttpServer Class: Midgar Midgar Midgar Class Manage Config, plugin manager, logeer and events new Midgar() Members app :Express Express instance for the front webserver Type: Express See: express doc cli :Commander Commander instance Type: Commander See: commander doc config :Config Config instance Type: Config logger :Logger Logger instance Type: Logger pm :PluginManager Plugin manager instance Type: PluginManager webServer :http.Server Http server Type: http.Server Methods debug(args) Log a debug message Parameters: Name Type Argument Description args any &lt;repeatable&gt; error(args) Log an error message Parameters: Name Type Argument Description args any &lt;repeatable&gt; &lt;async&gt; exit() Exit Wait for the logger gracefull exit the process getModeEnv() Return the env code Returns: Type string info(args) Log an info message Parameters: Name Type Argument Description args any &lt;repeatable&gt; &lt;async&gt; init(configPath) Load the config, init logger and plugin manager Parameters: Name Type Description configPath Sting &lt;async&gt; initLogger() Create logger instace and init &lt;async&gt; initPluginManager() Init plugin manager &lt;async&gt; initWebServer() Create the express app and add some middlewares &lt;async&gt; loadConfig() load the config silly(args) Log a silly message Parameters: Name Type Argument Description args any &lt;repeatable&gt; &lt;async&gt; start(configPath) Start Midgar Init Midgar, init webserver and start them Parameters: Name Type Description configPath Sting config dir path &lt;async&gt; startWebServer() Start front web serveur stop() Stop web server verbose(args) Log a verbose message Parameters: Name Type Argument Description args any &lt;repeatable&gt; warn(args) Log a warning message Parameters: Name Type Argument Description args any &lt;repeatable&gt; × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-30T14:22:24+00:00 using the DocStrap template. "},"Plugin.html":{"id":"Plugin.html","title":"Class: Plugin","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:${pluginName}:afterInitevent:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:initHttpServer Class: Plugin Plugin Plugin class &lt;abstract&gt; new Plugin() Members config :Object Plugin config from plugin-config.js Type: Object dirs :Object Plugin dirs from plugin-config.js Type: Object name :String Plugin name Type: String package :Object package.json Type: Object path :String Plugin path Type: String pm :PluginManager Plugin Manager Type: PluginManager Methods getDir(name) Return a dir path by is name Parameters: Name Type Description name String Returns: Type String &lt;async&gt; init() Init method × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-30T14:22:24+00:00 using the DocStrap template. "},"PluginManager.html":{"id":"PluginManager.html","title":"Class: PluginManager","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:${pluginName}:afterInitevent:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:initHttpServer Class: PluginManager PluginManager PluginMaganger class Manage plugins new PluginManager() Members mid :Midgar Midgar instance Type: Midgar pluginDirs :object Define the default plugins dirs it can be overite by the plugin config Type: object plugins :Object Plugins Object by name Type: Object pluginsPath :String local plugins directory path Type: String rewritedPlugins :Object Rewrited plugin object mapping Type: Object rewriteFile :Object Rewrite plugin file mapping Type: Object rewritePlugins :Object Rewrite plugin object mapping Type: Object Methods &lt;async&gt; addPlugin(name) Add a plugin in the plugins.json config file Return true if the plugin was added or false Parameters: Name Type Description name String Plugin name Returns: Type Boolean addPluginDir(key, defaultPath) Add a plugin directory Parameters: Name Type Description key String Directory key defaultPath String Default path &lt;async&gt; disablePlugin(name) Disable a plugin in the plugins.json config file Return true if the plugin was enabled or false Parameters: Name Type Description name String Plugin name Returns: Type Boolean &lt;async&gt; enablePlugin(name) Enable a plugin in the plugins.json config file Return true if the plugin was enabled or false Parameters: Name Type Description name String Plugin name Returns: Type Boolean &lt;async&gt; getDirs(dir) Return an array of object contain the plugin and the dir found Parameters: Name Type Description dir plugin dir key Returns: Type Array getPlugin(name) Return a plugin instance by name Parameters: Name Type Description name String Plugin name Returns: Type Plugin getSortedPlugins(plugins) Return an array of plugin names sorted by dependencies Parameters: Name Type Default Description plugins Array null Plugin name, if is not set use all plugin register Returns: Type Array &lt;async&gt; importDir(dirkey, regExp, recursive) Import files inside a directory of each plugins Parameters: Name Type Default Description dirkey String Plugin dir name regExp RegExp null Use to filter by filname recursive Boolean true Reacursive or not, it true by default Returns: Type Array &lt;async&gt; init() Init plugin manager Get the enabled plugins from the config and load them &lt;async&gt; loadPlugins(plugins, pluginsConfig) Load plugins config and package.json and create plugin instances Parameters: Name Type Description plugins Array Array of plugin anabled plugins names pluginsConfig Object Plugins config object (plugins.json) &lt;async&gt; removePlugin(name) Remove a plugin from the plugins.json config file Return true if the plugin was removed or false Parameters: Name Type Description name String Plugin name Returns: Type Boolean × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-30T14:22:24+00:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
