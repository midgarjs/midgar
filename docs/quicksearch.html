<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global Global Type Definitions ModuleType Type: Object Properties: Name Type Description path string Modules path glob string Glob pattern ignore string | Array Ignore glob pattern Events @midgar/midgar:afterInit afterInit event. @midgar/midgar:afterLoadPlugins afterLoadPlugins event. @midgar/midgar:stop stop event. × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:13+00:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global Classes Classes Cli Logger Midgar Plugin PluginManager Events @midgar/midgar:afterInit afterInit event. @midgar/midgar:afterLoadPlugins afterLoadPlugins event. @midgar/midgar:stop stop event. × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:13+00:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global En développement ne pas utiliser en production Midgar Qu'est ce que Midgar Midgar est un framework nodejs modulaire utilisant le pattern Model View-Controller Service (MVCS). Il se base sur un système de plugin pour permetre de réaliser rapidement des applications web complexes de manière claire et structuré. npm Installation $ npm install -g @midgar/midgar Utilisation Le moyen le plus rapide de démarrer avec Midgar est d'utiliser le CLI pour générer la structure d'un projet. $ midgar init ~/my-project/ $ cd ~/my-project/ $ npm i En soit Midgar ne fait que charger des plugins, sans plugin, il ne fait donc rien de concret ! L'étape suivante est donc d'installer des plugins. L'installation des plugins se fait via npm ou yarn. L'utilisation des scripts de npm permet l'activation automatique des plugins sur le projet. Vous pouvez voir la structure du project générer par la commande init ici. Documentation documentation Api. Plugins officiel Nom Description service Système de services avec injection de dépendances. express Service Express. controller Système de controller avec injection de service pour la gestion des routes d'express. migrate Service de migration mongo Service Mongoose avec chargement des models et migrations. graphql-server Service Apollo server avec chargement des schémas et resolvers. Resolvers avec injection de service. Cli Voici les commandes de base du cli init: $ midgar run init ./mon-project Initialise un nouveau projet midgar. add: $ midgar add monplugin Ajoute un plugin au fichier plugins.json contenu dans le dossier de configuration du projet. rm: $ midgar rm @migar/service Supprime le plugin @migar/service du fichier plugins.json. enable: $ midgar enable @migar/service Active un plugin présent dans le fichier plugins.json. Si le plugin n'est pas présen, il n'est pas ajouté et un avertisement est affiché. disable: $ midgar disable @migar/service Désactive le plugin @migar/service dans le fichier plugins.json. Si le plugin n'est pas présent, il n'est pas ajouté et un avertisement est affiché. Paramètre optionnel: $ midgar add @migar/service --config ~/mon-projet/src/config Vous pouvez ajouter le chemin de la configuration du projet au cli. Par defaut, le cli cherche un fichier .midrc contenant le chemin de la configuration. S'il ne trouve pas ce fichier il cherche dans ./config. Vous pouvez voir un exemple de fichier .midrc ici Créer un plugin Fichier plugin Voici un exemple de fichier plugin: import { Plugin } from '@midgar/midgar' export default class TestPlugin extends Plugin { init () { this.mid.on('@midgar/midgar:afterLoadPlugins', async () =&gt; { // Ceci est exécuté une fois que tous les plugins ont été chargés }) } } Vous pouvez retouver la liste des évènements dans la documentation. Package npm Un plugin est en premier lieu un package npm et doit etre forcement accompagné d'un fichier package.json. Le main du package.json doit pointer sur le fichier plugin. Pour fonctionner il doit aussi etre déclarré dans le fichier plugins.json contenu dans le dossier de configuration du projet. Les scripts postinstall et preuninstall peuvent être utiliser pour ajouter/supprimer automatiquement les plugins du fichier plugins.json. Configuration du plugin Vous pouvez ajouter un fichier plugin-config.js dans le même dossier que le fichier plugin. Ce fichier est charger avant le chargement des plugins et est injecté dans le membre .config de l'instance du plugin. Modules Le système de plugin comprend un importer de modules. Vous pouvez déclarrer un type de modules a importer dans la methode init de votre plugin: import { Plugin } from '@midgar/midgar' export default class TestPlugin extends Plugin { init () { this.pm.addModuleType('mon-type', 'mondossier') } } mon-type corréspond à l'identifiant du type de module. modossier corréspond au chemin par défaut du dossier contenant ce type de modules. @see: https://midgarjs.github.io/midgar/PluginManager.html#addModuleType__anchor Pour importer les modules: import { Plugin } from '@midgar/midgar' export default class TestPlugin extends Plugin { init () { this.mid.on('@midgar/midgar:afterLoadPlugins', async () =&gt; { const files = await this.mid.pm.importModules('mon-type') ... }) } } @see: https://midgarjs.github.io/midgar/PluginManager.html#importModules__anchor La méthode importModules importe tous les modules mon-typer pour tous les plugins. Le chemin du dossier mon-type est par défaut ./mondossier/ relativement par rapport au fichier plugin. La méthode importModules renvoit un tableau d'object: [ { path: '~/mon-projet/src/plugins/test-plugin/mondossier/fichier.js', export: ... // La valeur export default du fichier plugin: 'test-plugin', relativePath: 'fichier.js' }, ... } Le chemin du dossier mon-type peut etre configuré pour chaque plugin dans le fichier plugin-config.js: export default { modules: { 'mon-type': 'mon/nouveau/dossier', } } Réecriture Si un plugin ne fait pas axactement ce dont vous avez besoin, ou bien si vous voulez enrichir les fonctionnalitées d'un plugin, vous pouvez utiliser le système de réecture. Les plugins ainsi que les modules importé via la méthode importModules sont réecrivable. Plugin Pour réecrire un plugin, ajouter ceci dans le fichier plugin-config.js. export default { rewrite:{ plugin: '@midgar/service' } } } Lors du chargement des plugins, ce plugin sera chargé à la place du plugin @midgar/service. Le plugin devrait ressembler à ceci: import ServicePlugin from '@midgar/service' export default class RewritePlugin extends ServicePlugin { async init () { await super.init() .... } } Module Pour réecrir un module importé via la méthode importModules, ajouter ceci dans le fichier plugin-config.js. export default { rewrite: { modules: { \"midgar-mongoose-models\": { // Type de module \"@midgar/graphql-auth\": { // nom du plugin a réecrire 'user.js': './rewrite/models/user.js' // chemin du fichier a réecrire: chemin du module de remplacement } } } } } Lors de l'import des modules, le modules ./rewrite/models/user.js sera chargé à la place du modules user.js contenu dans le dossier midgar-mongoose-models et pour le plugin @midgar/graphql-auth × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:13+00:00 using the DocStrap template. "},"Cli.html":{"id":"Cli.html","title":"Class: Cli","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global Class: Cli Cli Manage the Commander program new Cli() Construct init vars, create program and Midgar instance Members cwd Current working directory Methods addCommand(command) Add a command to the program Parameters: Name Type Description command object Command Object addCommands(commands) Add commands to commander program Parameters: Name Type Description commands Array Array of comamnd Object &lt;async&gt; init() Get the config path, init midgard and load plugins commands &lt;async&gt; loadPluginsCommands() Get all plugins cli files and add commands run() Parse argv and run command Wait for action result promise Returns: Type Any × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:13+00:00 using the DocStrap template. "},"Logger.html":{"id":"Logger.html","title":"Class: Logger","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global Class: Logger Logger Logger class new Logger() Methods &lt;async&gt; error(msg) log an error message or an Error Parameters: Name Type Description msg * &lt;async&gt; init() Init logger &lt;async&gt; log(level, msg) log a message Parameters: Name Type Description level * msg * × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:13+00:00 using the DocStrap template. "},"Midgar.html":{"id":"Midgar.html","title":"Class: Midgar","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global Class: Midgar Midgar Midgar Class Manage Config, plugin manager, logeer and events new Midgar() Members cli :Commander Commander instance Type: Commander See: commander doc config :Config Config instance Type: Config logger :Logger Logger instance Type: Logger pm :PluginManager Plugin manager instance Type: PluginManager Methods &lt;protected&gt; _createPmInstance() Create Plugin manager instance Returns: Type PluginManager addPlugin(name) Add a plugin in the plugins.json config file Return true if the plugin was added or false Parameters: Name Type Description name string Plugin name Returns: Type Promise.&lt;boolean&gt; debug(args) Log a debug message Parameters: Name Type Argument Description args any &lt;repeatable&gt; &lt;async&gt; disablePlugin(name) Disable a plugin in the plugins.json config file Return true if the plugin was enabled or false Parameters: Name Type Description name string Plugin name Returns: Type Promise.&lt;boolean&gt; &lt;async&gt; enablePlugin(name) Enable a plugin in the plugins.json config file Return true if the plugin was enabled or false Parameters: Name Type Description name string Plugin name Returns: Type Promise.&lt;boolean&gt; error(args) Log an error message Parameters: Name Type Argument Description args any &lt;repeatable&gt; &lt;async&gt; exit() Exit Wait for the logger gracefull exit the process Returns: Type Promise.&lt;void&gt; getNodeEnv() Return the node env code Returns: Type string info(args) Log an info message Parameters: Name Type Argument Description args any &lt;repeatable&gt; &lt;async&gt; initLogger() Create logger instace and init Returns: Type Promise.&lt;void&gt; &lt;async&gt; initPluginManager() Init plugin manager Returns: Type Promise.&lt;void&gt; &lt;async&gt; loadConfig() load the config Returns: Type Promise.&lt;void&gt; &lt;async&gt; removePlugin(name) Remove a plugin from the plugins.json config file Return true if the plugin was removed or false Parameters: Name Type Description name string Plugin name Returns: Type Promise.&lt;boolean&gt; silly(args) Log a silly message Parameters: Name Type Argument Description args any &lt;repeatable&gt; &lt;async&gt; start(configPath) Start Midgar Load the config, init logger and plugin manager Parameters: Name Type Description configPath Sting config dir path Returns: Type Promise.&lt;void&gt; &lt;async&gt; stop() Stop Midgar Returns: Type Promise.&lt;void&gt; verbose(args) Log a verbose message Parameters: Name Type Argument Description args any &lt;repeatable&gt; warn(args) Log a warning message Parameters: Name Type Argument Description args any &lt;repeatable&gt; × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:13+00:00 using the DocStrap template. "},"Plugin.html":{"id":"Plugin.html","title":"Class: Plugin","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global Class: Plugin Plugin Plugin class &lt;abstract&gt; new Plugin() Members config :object Plugin config from plugin-config.js Type: object mid :Midgar Midgar Instance Type: Midgar moduleTypes :object Module types from plugin-config.js Type: object name :string Plugin name Type: string package :object package.json Type: object path :string Plugin absolute path Type: string pm :PluginManager Plugin Manager Type: PluginManager Methods getModuleType(type) Return plugin module type configuration Parameters: Name Type Description type string Module type Returns: Type ModuleType &lt;async&gt; init() Init method Returns: Type Promise.&lt;void&gt; × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:13+00:00 using the DocStrap template. "},"PluginManager.html":{"id":"PluginManager.html","title":"Class: PluginManager","body":" Documentation Classes CliLoggerMidgarPluginPluginManager Events event:@midgar/midgar:afterInitevent:@midgar/midgar:afterLoadPluginsevent:@midgar/midgar:stop Global Global Class: PluginManager PluginManager PluginMaganger class Manage plugins new PluginManager() Members localPath :string local plugins directory path Type: string mid :Midgar Midgar instance Type: Midgar moduleTypes :object Module types dictionary Type: object plugins :object Plugins Dictionary Type: object rewritedPlugins :object Rewrited plugin dictionary Type: object rewriteModules :object Rewrite modules Type: object rewritePlugins :object Rewrite plugin dictionary Type: object Methods addModuleType(key, path, glob, ignore) Add a plugin module types Parameters: Name Type Default Description key string Module type key path string Relative path for modules directory glob string **/*.js Glob pattern, default is **\\/*.js ignore string null Ignore glob pattern or Array of glob pattern &lt;async&gt; addPlugin(name) Add a plugin in the plugins.json config file Return true if the plugin was added or false Parameters: Name Type Description name string Plugin name Returns: Type boolean &lt;async&gt; disablePlugin(name) Disable a plugin in the plugins.json config file Return true if the plugin was enabled or false Parameters: Name Type Description name string Plugin name Returns: Type boolean &lt;async&gt; enablePlugin(name) Enable a plugin in the plugins.json config file Return true if the plugin was enabled or false Parameters: Name Type Description name string Plugin name Returns: Type boolean getModuleType(type) Return a module type definition Parameters: Name Type Description type * Module type Returns: Type ModuleType getPlugin(name) Return a plugin instance by name Parameters: Name Type Description name string Plugin name Returns: Type Plugin getSortedPlugins(plugins) Return an array of plugin names sorted by dependencies Parameters: Name Type Default Description plugins Array null Plugin name, if is not set use all plugin register Returns: Type Array &lt;async&gt; importModules(type) Import files inside a directory of each plugins Parameters: Name Type Description type string Module type key Returns: Type Array &lt;async&gt; init() Init plugin manager Get the enabled plugins from the config and load them Returns: Type Promise.&lt;void&gt; &lt;async&gt; loadPlugins(plugins, pluginsConfig) Load plugins config and package.json and create plugin instances Parameters: Name Type Description plugins Array Array of plugin anabled plugins names pluginsConfig object Plugins config object (plugins.json) Returns: Type Promise.&lt;void&gt; &lt;async&gt; removePlugin(name) Remove a plugin from the plugins.json config file Return true if the plugin was removed or false Parameters: Name Type Description name string Plugin name Returns: Type boolean × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-16T18:43:14+00:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
